(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{5074:function(e,t,n){Promise.resolve().then(n.bind(n,571))},987:function(e,t,n){"use strict";var s=n(7663),i=n(4033);let a=async()=>{let e=localStorage.getItem("token");if(!e)throw Error("No token found");let t=await fetch("".concat("http://localhost:5000","/auth/profile"),{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("Unable to fetch user");return t.json()};t.Z=()=>{(0,i.useRouter)();let{data:e,isLoading:t,error:n,refetch:r,status:l,isError:c}=(0,s.a)({queryKey:["user"],queryFn:()=>a(),retry:!1,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,enabled:!0});return{data:e,isLoading:t,error:n,refetch:r,status:l,isError:c}}},571:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return S}});var s=n(7437),i=n(3445),a=n.n(i);n(2445);var r=n(2265),l=n(2631),c=n.n(l),o=n(6691),u=n.n(o),h={src:"/_next/static/media/logo.d9abed81.svg",height:33,width:109,blurWidth:0,blurHeight:0},_=n(1396),d=n.n(_),m={src:"/_next/static/media/User.f27bde83.svg",height:19,width:18,blurWidth:0,blurHeight:0},f=n(6918),x=n.n(f),g=e=>{let{isOpen:t,menuItems:n}=e;return(0,s.jsx)("div",{className:"".concat(x().dropdown," ").concat(t?x().active:""),children:(0,s.jsx)("ul",{children:n.map((e,t)=>(0,s.jsxs)("li",{className:x().menuItem,children:[(0,s.jsx)("span",{className:x().icon,children:(0,s.jsx)(u(),{src:e.icon,alt:"icon",width:24,height:24})}),(0,s.jsx)("span",{className:x().itemText,children:(0,s.jsx)(d(),{href:e.link,children:e.text})})]},t))})})},v=n(987),y=n(4033);let j=[{icon:"/images/signout.svg",link:"/signout",text:"Sign Out"}],p=[{to:"/",text:"Extract"},{to:"/history",text:"History"}];function N(){let[e,t]=(0,r.useState)(!1),n=(0,y.usePathname)();(0,y.useRouter)();let i=()=>{t(!1)},{data:a,isLoading:l,error:o,isError:_,status:f}=(0,v.Z)();return(0,r.useEffect)(()=>(window.addEventListener("click",i),()=>{window.removeEventListener("click",i)}),[]),(0,s.jsx)("nav",{className:c().container,children:(0,s.jsxs)("div",{className:c().navbar,children:[(0,s.jsxs)("div",{className:c().leftSection,children:[(0,s.jsx)(d(),{className:c().logo,href:"/",children:(0,s.jsx)(u(),{src:h,alt:"Logo",width:0,height:0})}),(0,s.jsx)("ul",{className:c().menu,children:p.map(e=>(0,s.jsx)("li",{className:"".concat(c().item," ").concat(n===e.to?c().active:""),children:(0,s.jsx)(d(),{href:e.to,children:e.text})},e.to))})]}),(0,s.jsxs)("div",{className:c().rightSection,children:[(0,s.jsx)("div",{className:c().userMail,children:"success"===f&&a?(0,s.jsx)("p",{children:a.email}):(0,s.jsx)("p",{children:l?"Loading...":_?"An error has occurred while logging in: "+o:""})}),(0,s.jsxs)("div",{className:c().avatar,onClick:n=>{n.stopPropagation(),t(!e)},children:[(0,s.jsx)(u(),{src:m,alt:"Avatar",width:0,height:0}),(0,s.jsx)(g,{isOpen:e,menuItems:j})]})]})]})})}var w=n(847),b=n(8038);let k=new w.S;function S(e){let{children:t}=e,n=(0,y.usePathname)(),i=(0,y.useRouter)();return(0,r.useEffect)(()=>{var e;(null===(e=localStorage)||void 0===e?void 0:e.getItem("token"))||"/login"===n||"/signup"===n||i.push("/login")},[n,i]),(0,s.jsx)(b.aH,{client:k,children:(0,s.jsx)("html",{lang:"en",children:(0,s.jsxs)("body",{className:a().className,children:["/login"==n||"/signup"==n?null:(0,s.jsx)(N,{}),t]})})})}},2445:function(){},6918:function(e){e.exports={dropdown:"styles_dropdown__72CKy",active:"styles_active__snEGT",menuItem:"styles_menuItem__TPCzb",itemText:"styles_itemText__3YCHi",icon:"styles_icon__OSGzX"}},2631:function(e){e.exports={container:"styles_container__rXtlq",navbar:"styles_navbar__otxOW",leftSection:"styles_leftSection__OqGCq",logo:"styles_logo__ZySr_",menu:"styles_menu__4fJVA",item:"styles_item__NnqP7",active:"styles_active__5htlE",rightSection:"styles_rightSection__GZ_IF",userMail:"styles_userMail__2nTTM",avatar:"styles_avatar__tAkUC"}},3445:function(e){e.exports={style:{fontFamily:"'__Inter_e66fe9', '__Inter_Fallback_e66fe9'",fontStyle:"normal"},className:"__className_e66fe9"}}},function(e){e.O(0,[966,496,396,847,663,971,938,744],function(){return e(e.s=5074)}),_N_E=e.O()}]);