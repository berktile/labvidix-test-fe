(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[696],{9697:function(t,e,s){Promise.resolve().then(s.bind(s,5504))},1753:function(t,e,s){"use strict";s.d(e,{Z:function(){return u},a:function(){return a}});var n=s(3588),i=s(4033);async function r(t,e){let s=await fetch("".concat("http://localhost:5000","/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:e})});if(!s.ok)throw Error((await s.json()).message);return await s.json()}async function o(){localStorage.removeItem("token")}function u(){let t=(0,i.useRouter)();return{signInMutation:(0,n.D)({mutationFn:t=>r(t.email,t.password),onSuccess:e=>{localStorage.setItem("token",e.token),t.push("/")},onError:t=>{console.log(t)}})}}let a=()=>((0,i.useRouter)(),{signOutMutation:(0,n.D)({mutationFn:()=>o(),onSuccess:()=>{},onError:t=>{console.log(t)}})})},5504:function(t,e,s){"use strict";s.r(e);var n=s(2265),i=s(4033),r=s(1753);e.default=()=>{let t=(0,i.useRouter)(),{signOutMutation:e}=(0,r.a)();return(0,n.useEffect)(()=>{(async()=>{try{if(!localStorage.getItem("token")){t.replace("/login");return}await e.mutateAsync(),t.replace("/login")}catch(t){console.error(t)}})()},[t,e]),null}},4033:function(t,e,s){t.exports=s(5313)},3588:function(t,e,s){"use strict";s.d(e,{D:function(){return l}});var n=s(2265),i=s(7470),r=s(7987),o=s(2996),u=s(300),a=class extends o.l{constructor(t,e){super(),this.#t=void 0,this.#e=t,this.setOptions(e),this.bindMethods(),this.#s()}#e;#t;#n;#i;bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){let e=this.options;this.options=this.#e.defaultMutationOptions(t),(0,u.VS)(e,this.options)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),this.#n?.setOptions(this.options),e?.mutationKey&&this.options.mutationKey&&(0,u.Ym)(e.mutationKey)!==(0,u.Ym)(this.options.mutationKey)&&this.reset()}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(t){this.#s(),this.#r(t)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#s(),this.#r()}mutate(t,e){return this.#i=e,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(t)}#s(){let t=this.#n?.state??(0,i.R)();this.#t={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#r(t){r.V.batch(()=>{if(this.#i&&this.hasListeners()){let e=this.#t.variables,s=this.#t.context;t?.type==="success"?(this.#i.onSuccess?.(t.data,e,s),this.#i.onSettled?.(t.data,null,e,s)):t?.type==="error"&&(this.#i.onError?.(t.error,e,s),this.#i.onSettled?.(void 0,t.error,e,s))}this.listeners.forEach(t=>{t(this.#t)})})}},c=s(8038),h=s(4805);function l(t,e){let s=(0,c.NL)(e),[i]=n.useState(()=>new a(s,t));n.useEffect(()=>{i.setOptions(t)},[i,t]);let o=n.useSyncExternalStore(n.useCallback(t=>i.subscribe(r.V.batchCalls(t)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),u=n.useCallback((t,e)=>{i.mutate(t,e).catch(p)},[i]);if(o.error&&(0,h.L)(i.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:u,mutateAsync:o.mutate}}function p(){}},4805:function(t,e,s){"use strict";function n(t,e){return"function"==typeof t?t(...e):!!t}s.d(e,{L:function(){return n}})}},function(t){t.O(0,[966,971,938,744],function(){return t(t.s=9697)}),_N_E=t.O()}]);