(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[952],{8205:function(e,t,s){Promise.resolve().then(s.bind(s,2961))},5277:function(e,t,s){"use strict";s.d(t,{s:function(){return c}});var a=s(8038),r=s(3588),n=s(3501),i=s(4033);let l=async(e,t)=>{let s=await n.Z.patch("/package/edit-package-name/".concat(e),{packageName:t});if(!s.data)throw Error("Error updating package name");return s.data},c=()=>{let e=(0,a.NL)();return(0,i.useRouter)(),(0,r.D)({mutationFn:e=>l(e.id,e.packageName),onSuccess:()=>{e.invalidateQueries({queryKey:["packages"]})},onError:e=>{console.log(e)}})}},2961:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return R}});var a=s(7437),r=s(2265),n=s(8005),i=s.n(n),l=s(8671),c=s.n(l),o=s(6691),d=s.n(o),u=s(8392),h={src:"/_next/static/media/back.e44df7a8.svg",height:32,width:32,blurWidth:0,blurHeight:0},C=s(5277),p=s(4033),_=s(7516),x=s.n(_),g=s(9229),m=s.n(g),f=e=>{let{isFilled:t,...s}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:25,height:24,viewBox:"0 0 25 24",fill:"none",...s,children:(0,a.jsx)("path",{className:"star-path",id:"Vector",d:"M23.281 9.00451C23.167 8.65513 22.9529 8.34694 22.6652 8.11826C22.3775 7.88958 22.0289 7.75048 21.6629 7.71826L16.3191 7.25607L14.2285 2.27419C14.0847 1.9354 13.8443 1.64643 13.5374 1.44329C13.2305 1.24016 12.8706 1.13184 12.5025 1.13184C12.1345 1.13184 11.7746 1.24016 11.4677 1.44329C11.1608 1.64643 10.9204 1.9354 10.7766 2.27419L8.68317 7.25607L3.33942 7.71826C2.97135 7.74873 2.62047 7.88724 2.33082 8.11638C2.04117 8.34553 1.82564 8.65512 1.71128 9.0063C1.59693 9.35748 1.58883 9.73462 1.68802 10.0904C1.7872 10.4462 1.98924 10.7647 2.26879 11.0061L6.33004 14.5498L5.11129 19.8223C5.02771 20.1813 5.05181 20.557 5.18058 20.9024C5.30936 21.2479 5.53709 21.5476 5.8353 21.7643C6.13352 21.981 6.48899 22.105 6.85728 22.1207C7.22557 22.1365 7.59034 22.0434 7.90598 21.8529L12.4997 19.0629L17.0935 21.8529C17.4091 22.0431 17.7738 22.136 18.1419 22.1201C18.51 22.1041 18.8653 21.9801 19.1633 21.7635C19.4614 21.5469 19.689 21.2472 19.8177 20.902C19.9465 20.5567 19.9706 20.1812 19.8872 19.8223L18.6685 14.5498L22.7297 11.0061C23.0085 10.7638 23.2096 10.4446 23.3077 10.0885C23.4057 9.73246 23.3965 9.35534 23.281 9.00451ZM17.0232 13.0001C16.7661 13.2238 16.5748 13.5134 16.4699 13.8376C16.365 14.1618 16.3505 14.5086 16.4279 14.8404L17.4957 19.4642L13.47 17.0192C13.1777 16.8412 12.842 16.747 12.4997 16.747C12.1574 16.747 11.8218 16.8412 11.5294 17.0192L7.50379 19.4642L8.57161 14.8404C8.64899 14.5086 8.63445 14.1618 8.52957 13.8376C8.42468 13.5134 8.2334 13.2238 7.97629 13.0001L4.40536 9.88482L9.10598 9.47794C9.44637 9.4488 9.77225 9.32684 10.0481 9.12534C10.324 8.92384 10.5393 8.65052 10.6707 8.33513L12.4997 3.97669L14.3288 8.33513C14.4601 8.65052 14.6754 8.92384 14.9513 9.12534C15.2272 9.32684 15.5531 9.4488 15.8935 9.47794L20.5941 9.88482L17.0232 13.0001Z",fill:t?"#3858FF":"#7E7E7E"})})},j=s(8038),v=s(3588),w=s(3501);let y=async(e,t)=>{let s=await w.Z.put("results/update-rating/".concat(e),{rating:t});if(!s.data)throw Error("Error updating rating");return s.data},N=()=>{let e=(0,j.NL)();return(0,v.D)({mutationFn:e=>y(e.processedDocumentId,e.rating),onSuccess:()=>{e.invalidateQueries({queryKey:["packageDetails"]})},onError:e=>{console.log(e)}})};var k=e=>{let{processedDocumentId:t,ratingValue:s}=e,[n,i]=(0,r.useState)(s||0),{mutateAsync:l,isSuccess:c,isError:o,error:d}=N(),u=e=>{i(e),h(e)},h=async e=>{await l({processedDocumentId:t,rating:e})};return(0,r.useEffect)(()=>{c&&n!==s&&(console.log("success"),i(s||0)),o&&console.log(d)},[c,o,d,s,n]),(0,a.jsxs)("section",{className:m().container,children:[(0,a.jsx)("p",{children:"Evaluate the results"}),(0,a.jsx)("div",{className:m().ratingContainer,children:[1,2,3,4,5].map((e,t)=>(0,a.jsx)("button",{className:"".concat(m().star," ").concat(e<=n?m().filled:""),onClick:()=>u(e),children:(0,a.jsx)(f,{isFilled:e<=n})},t))})]})};let L=e=>{let{...t}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",...t,children:(0,a.jsx)("path",{id:"Vector",d:"M21.3103 6.87768L17.1216 2.688C16.9823 2.54867 16.8169 2.43815 16.6349 2.36275C16.4529 2.28735 16.2578 2.24854 16.0608 2.24854C15.8638 2.24854 15.6687 2.28735 15.4867 2.36275C15.3047 2.43815 15.1393 2.54867 15 2.688L3.43969 14.2492C3.2998 14.388 3.18889 14.5532 3.11341 14.7353C3.03792 14.9173 2.99938 15.1125 3.00001 15.3096V19.4992C3.00001 19.8971 3.15804 20.2786 3.43935 20.5599C3.72065 20.8412 4.10218 20.9992 4.50001 20.9992H8.6897C8.88675 20.9999 9.08197 20.9613 9.26399 20.8858C9.44602 20.8104 9.61122 20.6995 9.75001 20.5596L21.3103 8.99925C21.4496 8.85995 21.5602 8.69458 21.6356 8.51257C21.711 8.33056 21.7498 8.13548 21.7498 7.93846C21.7498 7.74145 21.711 7.54637 21.6356 7.36436C21.5602 7.18235 21.4496 7.01698 21.3103 6.87768ZM8.6897 19.4992H4.50001V15.3096L12.75 7.05956L16.9397 11.2492L8.6897 19.4992ZM18 10.188L13.8103 5.99925L16.0603 3.74925L20.25 7.938L18 10.188Z",fill:"#3A3A49"})})},b=e=>{let{rawDocument:t}=e;return(0,a.jsxs)("section",{className:c().container,children:[(0,a.jsx)("div",{className:c().left,children:(0,a.jsx)("div",{className:c().docPreview,children:(0,a.jsx)(d(),{src:t.documentUrl,alt:"image",width:0,height:0,layout:"responsive",priority:!0})})}),(0,a.jsxs)("div",{className:c().right,children:[(0,a.jsxs)("div",{className:c().header,children:[(0,a.jsxs)("div",{className:c().fileNameWrapper,children:[(0,a.jsx)("div",{className:c().icon,children:(0,a.jsx)(d(),{src:u.Z,alt:"file",width:0,height:0})}),(0,a.jsx)("span",{className:c().fileName,children:t.documentName})]}),(0,a.jsxs)("div",{className:c().editResultsWrapper,children:[(0,a.jsx)("div",{className:c().icon,children:(0,a.jsx)(L,{})}),(0,a.jsx)("button",{className:c().editResults,children:"Edit results"})]})]}),(0,a.jsx)("ul",{className:c().results,children:t.extractedFile.extractedData.map((e,t)=>(0,a.jsxs)("li",{className:c().result,children:[(0,a.jsx)("span",{className:c().title,children:e.Type}),(0,a.jsx)("div",{className:c().contentWrapper,children:(0,a.jsx)("span",{className:c().content,children:e.Text})})]},t))})]}),(0,a.jsx)("div",{className:c().ratingContainer,children:(0,a.jsx)(k,{processedDocumentId:t.extractedFile._id,ratingValue:t.extractedFile.rating})})]})};var Z=e=>{let{packageData:t}=e,s=(0,p.useRouter)(),[n,i]=(0,r.useState)(!1),[l,o]=(0,r.useState)(t.packageName),{mutateAsync:u,isSuccess:_,isError:g,error:m}=(0,C.s)(),[f,j]=(0,r.useState)(!1);(0,r.useEffect)(()=>{_&&(i(!1),j(!1)),g&&(console.log(m),j(!1))},[_,g,m]);let v=(0,r.useCallback)(async()=>{j(!0),await u({id:t._id,packageName:l})},[l]);return(0,a.jsxs)("div",{className:c().wrapper,children:[(0,a.jsxs)("div",{className:c().upperSection,children:[(0,a.jsx)("button",{className:c().backButton,onClick:()=>{s.back()},children:(0,a.jsx)(d(),{src:h,alt:"back",width:0,height:0})}),(0,a.jsxs)("div",{className:c().packageNameContainer,children:[n?(0,a.jsx)("input",{type:"text",value:l,onChange:e=>{o(e.target.value)},onBlur:()=>{v()},onKeyDown:e=>{"Enter"===e.key&&v()},autoFocus:!0}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{className:c().packageName,children:l}),(0,a.jsx)("div",{className:c().icon,onClick:()=>{i(!0)},children:(0,a.jsx)(L,{})})]}),f&&(0,a.jsx)("div",{className:c().icon,children:(0,a.jsx)(x(),{color:"#3A3A49",size:24})})]})]}),(0,a.jsxs)("section",{className:c().resultsViewsContainer,children:[(0,a.jsxs)("div",{className:c().resultsHeader,children:[(0,a.jsx)("span",{className:c().headerItem,children:"Uploaded file"}),(0,a.jsx)("span",{className:c().headerItem,children:"Text extraction result"})]}),t.rawDocuments.map((e,t)=>(0,a.jsx)(b,{rawDocument:e},t))]})]})},E=s(7663),M=s(987);let W=async e=>{let t=await w.Z.get("/package/get-package/".concat(e));if(!t.data)throw Error("Error fetching package details");return t.data},F=e=>{var t,s;let{data:a,isLoading:r,error:n,refetch:i,status:l,isError:c}=(0,E.a)({queryKey:["packageDetails",e],queryFn:()=>W(e),refetchOnWindowFocus:!1,refetchOnMount:!0,enabled:!!(null===(s=(0,M.Z)())||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.id)});return{data:a,isLoading:r,error:n,refetch:i,status:l,isError:c}};var D=s(9641);function R(){let{id:e}=(0,p.useParams)();console.log("id",e);let{isLoading:t,isError:s,error:r,data:n}=F(e);return(console.log(n),t)?(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,a.jsx)(D.Z,{status:D.q.Loading})}):s?(0,a.jsxs)("div",{children:["Error: ",null==r?void 0:r.message]}):(0,a.jsx)("div",{className:i().container,children:n&&(0,a.jsx)(Z,{packageData:n})})}},9641:function(e,t,s){"use strict";s.d(t,{q:function(){return r}});var a,r,n=s(7437);s(2265);var i=s(5515),l=s.n(i);(a=r||(r={})).Loading="loading",a.Success="success",a.Error="error";let c=e=>(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:78,height:78,viewBox:"0 0 78 78",fill:"none",...e,children:[(0,n.jsx)("circle",{cx:39,cy:39,r:36,stroke:"#DD5144",strokeWidth:6}),(0,n.jsx)("path",{d:"M49 29L28 50",stroke:"#DD5144",strokeWidth:6,strokeLinecap:"round"}),(0,n.jsx)("path",{d:"M28 29L49 50",stroke:"#DD5144",strokeWidth:6,strokeLinecap:"round"})]}),o=e=>(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:96,height:96,viewBox:"0 0 96 96",fill:"none",...e,children:[(0,n.jsx)("g",{id:"mingcute:loading-3-line",clipPath:"url(#clip0_90_2982)",children:(0,n.jsxs)("g",{id:"Group",children:[(0,n.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 48 48",to:"360 48 48",dur:"1s",repeatCount:"indefinite"}),(0,n.jsx)("path",{id:"Vector",opacity:.1,fillRule:"evenodd",clipRule:"evenodd",d:"M48 16C39.5131 16 31.3737 19.3714 25.3726 25.3726C19.3714 31.3737 16 39.5131 16 48C16 56.4869 19.3714 64.6262 25.3726 70.6274C31.3737 76.6286 39.5131 80 48 80C56.4869 80 64.6262 76.6286 70.6274 70.6274C76.6286 64.6262 80 56.4869 80 48C80 39.5131 76.6286 31.3737 70.6274 25.3726C64.6262 19.3714 56.4869 16 48 16ZM8 48C8 25.908 25.908 8 48 8C70.092 8 88 25.908 88 48C88 70.092 70.092 88 48 88C25.908 88 8 70.092 8 48Z",fill:"#3858FF"}),(0,n.jsx)("path",{id:"Vector_2",fillRule:"evenodd",clipRule:"evenodd",d:"M47.9999 16.0001C39.7495 15.9826 31.8146 19.1692 25.8679 24.8881C25.4886 25.2516 25.0415 25.5368 24.552 25.7275C24.0625 25.9182 23.5403 26.0106 23.0151 25.9995C22.4898 25.9883 21.972 25.8738 21.491 25.6625C21.01 25.4513 20.5754 25.1473 20.2119 24.7681C19.8484 24.3888 19.5632 23.9417 19.3725 23.4522C19.1818 22.9627 19.0894 22.4404 19.1005 21.9152C19.1117 21.39 19.2261 20.8721 19.4374 20.3912C19.6487 19.9102 19.9526 19.4756 20.3319 19.1121C27.7682 11.9658 37.6865 7.98242 47.9999 8.00006C49.0608 8.00006 50.0782 8.42149 50.8283 9.17163C51.5785 9.92178 51.9999 10.9392 51.9999 12.0001C51.9999 13.0609 51.5785 14.0783 50.8283 14.8285C50.0782 15.5786 49.0608 16.0001 47.9999 16.0001Z",fill:"#3858FF"})]})}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_90_2982",children:(0,n.jsx)("rect",{width:96,height:96,fill:"white"})})})]}),d=e=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:96,height:96,viewBox:"0 0 96 96",fill:"none",...e,children:(0,n.jsx)("g",{id:"CheckCircle",children:(0,n.jsx)("path",{id:"Vector",d:"M65.1225 36.8775C65.4014 37.1561 65.6227 37.487 65.7737 37.8512C65.9247 38.2154 66.0024 38.6058 66.0024 39C66.0024 39.3942 65.9247 39.7846 65.7737 40.1488C65.6227 40.513 65.4014 40.8439 65.1225 41.1225L44.1225 62.1225C43.8439 62.4014 43.513 62.6227 43.1488 62.7737C42.7846 62.9247 42.3943 63.0024 42 63.0024C41.6058 63.0024 41.2154 62.9247 40.8512 62.7737C40.487 62.6227 40.1561 62.4014 39.8775 62.1225L30.8775 53.1225C30.3146 52.5596 29.9983 51.7961 29.9983 51C29.9984 50.2039 30.3146 49.4404 30.8775 48.8775C31.4404 48.3146 32.2039 47.9983 33 47.9983C33.7961 47.9983 34.5596 48.3146 35.1225 48.8775L42 55.7588L60.8775 36.8775C61.1561 36.5986 61.487 36.3773 61.8512 36.2263C62.2154 36.0753 62.6058 35.9976 63 35.9976C63.3943 35.9976 63.7846 36.0753 64.1488 36.2263C64.513 36.3773 64.8439 36.5986 65.1225 36.8775ZM87 48C87 55.7135 84.7127 63.2537 80.4273 69.6672C76.142 76.0808 70.051 81.0795 62.9247 84.0313C55.7984 86.9831 47.9568 87.7554 40.3915 86.2506C32.8262 84.7458 25.8771 81.0314 20.4229 75.5772C14.9686 70.1229 11.2542 63.1738 9.74939 55.6085C8.24457 48.0433 9.0169 40.2017 11.9687 33.0753C14.9205 25.949 19.9193 19.8581 26.3328 15.5727C32.7463 11.2873 40.2865 9 48 9C58.3401 9.01092 68.2536 13.1233 75.5651 20.4349C82.8767 27.7464 86.9891 37.6599 87 48ZM81 48C81 41.4732 79.0646 35.093 75.4385 29.6662C71.8124 24.2394 66.6585 20.0097 60.6286 17.512C54.5986 15.0143 47.9634 14.3608 41.562 15.6341C35.1607 16.9074 29.2806 20.0503 24.6655 24.6655C20.0504 29.2806 16.9074 35.1606 15.6341 41.562C14.3608 47.9634 15.0143 54.5986 17.512 60.6286C20.0097 66.6585 24.2394 71.8124 29.6662 75.4385C35.093 79.0646 41.4732 81 48 81C56.7491 80.9901 65.137 77.5101 71.3236 71.3236C77.5101 65.137 80.9901 56.7491 81 48Z",fill:"#5CB85C"})})});t.Z=e=>{let{status:t}=e,s=null,a=null;switch(t){case"loading":s=(0,n.jsx)(o,{}),a="Files extracting...";break;case"success":s=(0,n.jsx)(d,{}),a="Extraction completed successfully!";break;default:s=(0,n.jsx)(c,{}),a="Extraction failed"}return(0,n.jsxs)("section",{className:l().extractingStatusWrapper,children:[(0,n.jsx)("div",{className:l().spinner,children:s}),(0,n.jsx)("p",{children:a})]})}},987:function(e,t,s){"use strict";var a=s(7663),r=s(4033);let n=async()=>{let e=localStorage.getItem("token");if(!e)throw Error("No token found");let t=await fetch("".concat("http://localhost:5000","/auth/profile"),{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("Unable to fetch user");return t.json()};t.Z=()=>{(0,r.useRouter)();let{data:e,isLoading:t,error:s,refetch:i,status:l,isError:c}=(0,a.a)({queryKey:["user"],queryFn:()=>n(),retry:!1,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,enabled:!0});return{data:e,isLoading:t,error:s,refetch:i,status:l,isError:c}}},3501:function(e,t,s){"use strict";let a=s(2173).Z.create({baseURL:"http://localhost:5000"});a.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),t.Z=a},9229:function(e){e.exports={container:"styles_container__dMW95",ratingContainer:"styles_ratingContainer__opbcc",star:"styles_star__jriUK",filled:"styles_filled___lfiZ","star-path":"styles_star-path__daOIY"}},8671:function(e){e.exports={resultsHeader:"styles_resultsHeader__yVe6X",headerItem:"styles_headerItem__TZ8Uw",wrapper:"styles_wrapper__GXiUV",upperSection:"styles_upperSection__4X_P_",backButton:"styles_backButton__QGQhH",packageNameContainer:"styles_packageNameContainer__SMo61",icon:"styles_icon__XzZ9c",packageName:"styles_packageName__M0KCT",resultsViewsContainer:"styles_resultsViewsContainer__hAbYA",container:"styles_container__A7qe4",ratingContainer:"styles_ratingContainer__SWf_o",left:"styles_left__lgdk6",docPreview:"styles_docPreview__vGx_v",right:"styles_right__AZQCs",header:"styles_header__wiHMs",fileNameWrapper:"styles_fileNameWrapper__5LNj7",fileName:"styles_fileName__4Q_mb",editResultsWrapper:"styles_editResultsWrapper__l10A1",editResults:"styles_editResults__UBnGn",results:"styles_results__OMCPC",result:"styles_result__xxX7k",title:"styles_title__6RYAI",contentWrapper:"styles_contentWrapper__barx8",content:"styles_content__89cxH"}},5515:function(e){e.exports={extractingStatusWrapper:"styles_extractingStatusWrapper__OHnR5",spinner:"styles_spinner__Mfzx_"}},8005:function(e){e.exports={container:"results_container__nQm5I"}},8392:function(e,t){"use strict";t.Z={src:"/_next/static/media/file.9ad2116c.svg",height:24,width:24,blurWidth:0,blurHeight:0}}},function(e){e.O(0,[966,496,308,663,971,938,744],function(){return e(e.s=8205)}),_N_E=e.O()}]);