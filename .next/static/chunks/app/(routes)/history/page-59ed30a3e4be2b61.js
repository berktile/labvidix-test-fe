(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[293],{973:function(e,t,a){Promise.resolve().then(a.bind(a,1697))},1697:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return S}});var n=a(7437),r=a(2265),i=a(3774),o=a.n(i),c=a(6691),l=a.n(c),s={src:"/_next/static/media/edit.0ba936cb.svg",height:24,width:24,blurWidth:0,blurHeight:0},d={src:"/_next/static/media/chevron.2c4f9bb1.svg",height:24,width:24,blurWidth:0,blurHeight:0},u=a(8392),h={src:"/_next/static/media/download.1fa3ada2.svg",height:24,width:24,blurWidth:0,blurHeight:0},p={src:"/_next/static/media/arrow.bdebac8c.svg",height:24,width:24,blurWidth:0,blurHeight:0},m=a(2555),f=a(2067),v=a.n(f),g={src:"/_next/static/media/divider.b7b3919b.svg",height:24,width:2,blurWidth:0,blurHeight:0},y=a(8038),_=a(3588),x=a(3501),b=a(4033);let j=async(e,t)=>{let a=await x.Z.patch("/package/edit-package-name/".concat(e),{packageName:t});if(!a.data)throw Error("Error updating package name");return a.data},w=()=>{let e=(0,y.NL)();return(0,b.useRouter)(),(0,_.D)({mutationFn:e=>j(e.id,e.packageName),onSuccess:()=>{e.invalidateQueries({queryKey:["packages"]})},onError:e=>{console.log(e)}})};var C=a(7516),k=a.n(C),N=a(1396),O=a.n(N);let D=e=>[[{label:"DocumentName",key:"DocumentName"},{label:"DocumentURL",key:"DocumentURL"},{label:"Text",key:"Text"},{label:"Type",key:"Type"}],...e.extractedFile.extractedData.map(t=>({DocumentName:e.documentName,DocumentURL:e.documentUrl,Text:t.Text,Type:t.Type}))],M=e=>{let{rawDocuments:t}=e;return(0,n.jsx)(m.E.ul,{className:o().collapseBodyWrapper,initial:{height:0,opacity:0,y:-10},animate:{height:"auto",opacity:1,y:0},exit:{height:0,opacity:0,y:-10},transition:{duration:.5},children:t.map(e=>(0,n.jsxs)(m.E.li,{className:o().collapseBody,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.5},children:[(0,n.jsxs)("div",{className:o().fileNameWrapper,children:[(0,n.jsx)("div",{className:o().icon,children:(0,n.jsx)(l(),{src:u.Z,alt:"file",width:0,height:0})}),(0,n.jsx)("p",{children:e.documentName})]}),(0,n.jsxs)("div",{className:o().rightSection,children:[(0,n.jsx)("div",{className:o().icon,children:(0,n.jsx)(l(),{src:h,alt:"edit",width:0,height:0})}),(0,n.jsx)("div",{className:o().icon,children:(0,n.jsx)(l(),{src:p,alt:"arrow",width:0,height:0})})]})]},e._id))})},E=e=>{let{packageName:t,date:a,rawDocuments:i,onViewAll:c,onEdit:u,isCollapsed:h,id:p,onCollapse:m}=e,[f,y]=(0,r.useState)(!1),[_,x]=(0,r.useState)(t),{mutateAsync:b,isSuccess:j,isError:C,error:N}=w(),[M,E]=(0,r.useState)(!1);(0,r.useEffect)(()=>{j&&(y(!1),E(!1)),C&&(console.log(N),E(!1))},[j,C,N]);let R=(0,r.useCallback)(async()=>{E(!0),await b({id:p,packageName:_})},[_]),Y=v()(a,"DD/MM/YYYY HH:mm").format("DD/MM/YYYY HH:mm");return(0,n.jsxs)("div",{className:o().collapseHeader,children:[(0,n.jsxs)("div",{className:o().packageName,children:[f?(0,n.jsx)("input",{type:"text",value:_,onChange:e=>{x(e.target.value)},onBlur:()=>{R()},onKeyDown:e=>{"Enter"===e.key&&R()},autoFocus:!0}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{children:_}),(0,n.jsx)("div",{className:o().icon,onClick:()=>{u(),y(!0)},children:(0,n.jsx)(l(),{src:s,alt:"edit",width:0,height:0})})]}),M&&(0,n.jsx)("div",{className:o().icon,children:(0,n.jsx)(k(),{color:"#3A3A49",size:24})})]}),(0,n.jsxs)("div",{className:o().dateWrapper,children:[(0,n.jsx)("p",{children:Y.split(" ")[0]}),(0,n.jsx)(l(),{src:g,alt:"divider",width:0,height:0}),(0,n.jsx)("p",{children:Y.split(" ")[1]})]}),(0,n.jsx)("button",{className:o().downloadButton,onClick:()=>{i.forEach(e=>{let t=D(e).map(e=>Object.values(e).join(",")).join("\n"),a=new Blob([t],{type:"text/csv"}),n=URL.createObjectURL(a),r=document.createElement("a");r.href=n,r.target="_blank",r.download="".concat(e.documentName,"_data.csv"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)})},children:"Download all"}),(0,n.jsx)(O(),{className:o().viewAll,href:"/results/".concat(p),children:"View all"}),(0,n.jsx)("button",{className:"\n          ".concat(o().caret," \n          ").concat(h?o().up:o().down,"\n        "),onClick:m,children:(0,n.jsx)(l(),{src:d,alt:"caret",width:0,height:0})})]})};var R=e=>{let{packages:t}=e,a=null==t?void 0:t.sort((e,t)=>v()(e.createdAt,"DD/MM/YYYY HH:mm").isBefore(v()(t.createdAt,"DD/MM/YYYY HH:mm"))?1:-1),[i,c]=(0,r.useState)(a.map(()=>!1)),l=(0,r.useCallback)(e=>a.findIndex(t=>t._id===e),[a]),s=e=>{let t=l(e);c(e=>{let a=[...e];return a[t]=!a[t],a})};return(0,n.jsx)("section",{className:o().container,children:null==a?void 0:a.map(e=>(0,n.jsxs)(r.Fragment,{children:[(0,n.jsx)(E,{packageName:e.packageName,id:e._id,date:e.createdAt,rawDocuments:e.rawDocuments,onViewAll:()=>{},onEdit:()=>{},isCollapsed:i[l(e._id)],onCollapse:()=>s(null==e?void 0:e._id)}),!i[l(e._id)]&&(0,n.jsx)(M,{rawDocuments:e.rawDocuments})]},e._id))})},Y=a(6026),P=a.n(Y),H=a(7663),W=a(987);let A=async()=>{let e=await x.Z.get("/package/get-packages");if(!e.data)throw Error("Error fetching packages");return e.data},B=()=>{var e,t;let{data:a,isLoading:n,error:r,refetch:i,status:o,isError:c}=(0,H.a)({queryKey:["packages"],queryFn:A,refetchOnWindowFocus:!1,refetchOnMount:!0,enabled:null!==(t=(0,W.Z)())&&void 0!==t&&null!==(e=t.data)&&void 0!==e&&!!e.id});return{data:a,isLoading:n,error:r,refetch:i,status:o,isError:c}};var F=a(3797);function S(){let{data:e,isLoading:t,isError:a,error:r}=B();return t?(0,n.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,n.jsx)(F.Z,{})}):a?(0,n.jsx)("div",{children:null==r?void 0:r.message}):(0,n.jsxs)("div",{className:P().container,children:[e&&(0,n.jsx)(R,{packages:e}),(null==e?void 0:e.length)==0&&(0,n.jsx)("p",{children:"No data found"})]})}},3797:function(e,t,a){"use strict";var n=a(7437);a(2265),t.Z=e=>(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:96,height:96,viewBox:"0 0 96 96",fill:"none",...e,children:[(0,n.jsx)("g",{id:"mingcute:loading-3-line",clipPath:"url(#clip0_90_2982)",children:(0,n.jsxs)("g",{id:"Group",children:[(0,n.jsx)("animateTransform",{attributeName:"transform",type:"rotate",from:"0 48 48",to:"360 48 48",dur:"1s",repeatCount:"indefinite"}),(0,n.jsx)("path",{id:"Vector",opacity:.1,fillRule:"evenodd",clipRule:"evenodd",d:"M48 16C39.5131 16 31.3737 19.3714 25.3726 25.3726C19.3714 31.3737 16 39.5131 16 48C16 56.4869 19.3714 64.6262 25.3726 70.6274C31.3737 76.6286 39.5131 80 48 80C56.4869 80 64.6262 76.6286 70.6274 70.6274C76.6286 64.6262 80 56.4869 80 48C80 39.5131 76.6286 31.3737 70.6274 25.3726C64.6262 19.3714 56.4869 16 48 16ZM8 48C8 25.908 25.908 8 48 8C70.092 8 88 25.908 88 48C88 70.092 70.092 88 48 88C25.908 88 8 70.092 8 48Z",fill:"#3858FF"}),(0,n.jsx)("path",{id:"Vector_2",fillRule:"evenodd",clipRule:"evenodd",d:"M47.9999 16.0001C39.7495 15.9826 31.8146 19.1692 25.8679 24.8881C25.4886 25.2516 25.0415 25.5368 24.552 25.7275C24.0625 25.9182 23.5403 26.0106 23.0151 25.9995C22.4898 25.9883 21.972 25.8738 21.491 25.6625C21.01 25.4513 20.5754 25.1473 20.2119 24.7681C19.8484 24.3888 19.5632 23.9417 19.3725 23.4522C19.1818 22.9627 19.0894 22.4404 19.1005 21.9152C19.1117 21.39 19.2261 20.8721 19.4374 20.3912C19.6487 19.9102 19.9526 19.4756 20.3319 19.1121C27.7682 11.9658 37.6865 7.98242 47.9999 8.00006C49.0608 8.00006 50.0782 8.42149 50.8283 9.17163C51.5785 9.92178 51.9999 10.9392 51.9999 12.0001C51.9999 13.0609 51.5785 14.0783 50.8283 14.8285C50.0782 15.5786 49.0608 16.0001 47.9999 16.0001Z",fill:"#3858FF"})]})}),(0,n.jsx)("defs",{children:(0,n.jsx)("clipPath",{id:"clip0_90_2982",children:(0,n.jsx)("rect",{width:96,height:96,fill:"white"})})})]})},987:function(e,t,a){"use strict";var n=a(7663),r=a(4033);let i=async()=>{let e=localStorage.getItem("token");if(!e)throw Error("No token found");let t=await fetch("".concat("https://labvidix-test-cafd5a76379e.herokuapp.com","/auth/profile"),{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw Error("Unable to fetch user");return t.json()};t.Z=()=>{(0,r.useRouter)();let{data:e,isLoading:t,error:a,refetch:o,status:c,isError:l}=(0,n.a)({queryKey:["user"],queryFn:()=>i(),retry:!1,refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!1,enabled:!0});return{data:e,isLoading:t,error:a,refetch:o,status:c,isError:l}}},3501:function(e,t,a){"use strict";let n=a(2173).Z.create({baseURL:"https://labvidix-test-cafd5a76379e.herokuapp.com"});n.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e)),t.Z=n},3774:function(e){e.exports={container:"styles_container__O72FL",collapseHeader:"styles_collapseHeader__8fhmE",packageName:"styles_packageName__s3OrL",icon:"styles_icon__GlP80",dateWrapper:"styles_dateWrapper__P6bqC",downloadButton:"styles_downloadButton__iAT1U",viewAll:"styles_viewAll__R3YYG",caret:"styles_caret__NhJkL",up:"styles_up__JiH_v",down:"styles_down__Xh3PF",collapseBody:"styles_collapseBody__ygx09",fileNameWrapper:"styles_fileNameWrapper__JXlGV",rightSection:"styles_rightSection__ldSlY",collapseBodyWrapper:"styles_collapseBodyWrapper__NPYz1"}},6026:function(e){e.exports={container:"history_container__CWaKp"}},8392:function(e,t){"use strict";t.Z={src:"/_next/static/media/file.9ad2116c.svg",height:24,width:24,blurWidth:0,blurHeight:0}},7516:function(e,t,a){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var r in t=arguments[a])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,a,n){void 0===n&&(n=a);var r=Object.getOwnPropertyDescriptor(t,a);(!r||("get"in r?!t.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,n,r)}:function(e,t,a,n){void 0===n&&(n=a),e[n]=t[a]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&r(t,e,a);return i(t,e),t},c=this&&this.__rest||function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)0>t.indexOf(n[r])&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(a[n[r]]=e[n[r]]);return a};Object.defineProperty(t,"__esModule",{value:!0});var l=o(a(2265)),s=a(581),d=(0,a(9981).createAnimation)("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");t.default=function(e){var t=e.loading,a=e.color,r=void 0===a?"#000000":a,i=e.speedMultiplier,o=e.cssOverride,u=e.size,h=void 0===u?35:u,p=c(e,["loading","color","speedMultiplier","cssOverride","size"]),m=n({background:"transparent !important",width:(0,s.cssValue)(h),height:(0,s.cssValue)(h),borderRadius:"100%",border:"2px solid",borderTopColor:r,borderBottomColor:"transparent",borderLeftColor:r,borderRightColor:r,display:"inline-block",animation:"".concat(d," ").concat(.75/(void 0===i?1:i),"s 0s infinite linear"),animationFillMode:"both"},void 0===o?{}:o);return void 0===t||t?l.createElement("span",n({style:m},p)):null}},9981:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAnimation=void 0,t.createAnimation=function(e,t,a){var n="react-spinners-".concat(e,"-").concat(a);if("undefined"==typeof window||!window.document)return n;var r=document.createElement("style");document.head.appendChild(r);var i=r.sheet,o="\n    @keyframes ".concat(n," {\n      ").concat(t,"\n    }\n  ");return i&&i.insertRule(o,0),n}},581:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cssValue=t.parseLengthAndUnit=void 0;var a={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function n(e){if("number"==typeof e)return{value:e,unit:"px"};var t,n=(e.match(/^[0-9.]*/)||"").toString();t=n.includes(".")?parseFloat(n):parseInt(n,10);var r=(e.match(/[^0-9]*$/)||"").toString();return a[r]?{value:t,unit:r}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}t.parseLengthAndUnit=n,t.cssValue=function(e){var t=n(e);return"".concat(t.value).concat(t.unit)}}},function(e){e.O(0,[990,395,677,251,173,663,943,971,938,744],function(){return e(e.s=973)}),_N_E=e.O()}]);